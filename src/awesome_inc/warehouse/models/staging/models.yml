version: 2

models:
  - name: stg_dim_country
    description: Staging country table
    columns:
      - name: id
        # Add a better test to check for unique values
        tests:
          - not_null
      - name: name
        tests:
          - not_null
          - unique
      - name: region
        tests:
          - not_null
      - name: dbt_updated_at
        tests:
          - not_null
      - name: dbt_valid_from
        tests:
          - not_null
      - name: dbt_valid_to

  - name: stg_dim_customer
    description: Staging customer table
    columns:
      - name: id
        # Add a better test to check for unique values
        tests:
          - not_null
      - name: name
        tests:
          - not_null
      - name: email
        tests:
          - not_null
          - unique
      - name: country_id
        tests:
          - not_null
      - name: premium_customer
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
      - name: dbt_updated_at
        tests:
          - not_null
      - name: dbt_valid_from
        tests:
          - not_null
      - name: dbt_valid_to

  - name: stg_fct_installation
    description: Staging installation table
    columns:
      - name: id
        tests:
          - not_null
          - unique
      - name: name
        tests:
          - not_null
      - name: description
        tests:
          - not_null
      - name: product_id
        tests:
          - not_null
      - name: customer_id
        tests:
          - not_null
      - name: installation_date
        tests:
          - not_null

  - name: stg_dim_product
    description: Staging product table
    columns:
      - name: id
        # Add a better test to check for unique values
        tests:
          - not_null
      - name: reference
        tests:
          - not_null
      - name: name
        tests:
          - not_null
      - name: category_id
        tests:
          - not_null
      - name: price
        tests:
          - not_null
      - name: dbt_updated_at
        tests:
          - not_null
      - name: dbt_valid_from
        tests:
          - not_null
      - name: dbt_valid_to

  - name: stg_dim_product_category
    description: Staging product category table
    columns:
      - name: id
        # Add a better test to check for unique values
        tests:
          - not_null
      - name: name
        tests:
          - not_null
      - name: dbt_updated_at
        tests:
          - not_null
      - name: dbt_valid_from
        tests:
          - not_null
      - name: dbt_valid_to
